{"ast":null,"code":"import React,{useEffect,useState,useRef,useCallback}from'react';import{Navigate,Routes,Route,useLocation}from'react-router-dom';import URL from'constants/url';import CODE from'constants/code';//COMMON\nimport EgovHeader from'components/EgovHeader';import EgovFooter from'components/EgovFooter';import EgovError from'components/EgovError';import EgovMain from'pages/main/EgovMain';import EgovLogin from'pages/login/EgovLogin';//ABOUT\nimport EgovAboutSite from'pages/about/EgovAboutSite';import EgovAboutHistory from'pages/about/EgovAboutHistory';import EgovAboutOrganization from'pages/about/EgovAboutOrganization';import EgovAboutLocation from'pages/about/EgovAboutLocation';//INTRO\nimport EgovIntroWork from'pages/intro/EgovIntroWork';import EgovIntroService from'pages/intro/EgovIntroService';//SUPPORT\nimport EgovSupportDownloadList from'pages/support/download/EgovDownloadList';import EgovSupportDownloadDetail from'pages/support/download/EgovDownloadDetail';import EgovSupportDownloadCreate from'pages/support/download/EgovDownloadCreate';import EgovSupportQnaList from'pages/support/qna/EgovQnaList';import EgovSupportQnaDetail from'pages/support/qna/EgovQnaDetail';import EgovSupportApply from'pages/support/apply/EgovSupportApply';//INFORM\nimport EgovDailyList from'pages/inform/daily/EgovDailyList';import EgovDailyDetail from'pages/inform/daily/EgovDailyDetail';import EgovWeeklyList from'pages/inform/weekly/EgovWeeklyList';import EgovNoticeList from'pages/inform/notice/EgovNoticeList';import EgovNoticeDetail from'pages/inform/notice/EgovNoticeDetail';import EgovNoticeEdit from'pages/inform/notice/EgovNoticeEdit';import EgovGalleryList from'pages/inform/gallery/EgovGalleryList';import EgovGalleryDetail from'pages/inform/gallery/EgovGalleryDetail';import EgovGalleryEdit from'pages/inform/gallery/EgovGalleryEdit';//ADMIN\nimport EgovAdminScheduleList from'pages/admin/schedule/EgovAdminScheduleList';import EgovAdminScheduleDetail from'pages/admin/schedule/EgovAdminScheduleDetail';import EgovAdminScheduleEdit from'pages/admin/schedule/EgovAdminScheduleEdit';import EgovAdminBoardList from'pages/admin/board/EgovAdminBoardList';import EgovAdminBoardEdit from'pages/admin/board/EgovAdminBoardEdit';import EgovAdminUsageList from'pages/admin/usage/EgovAdminUsageList';import EgovAdminUsageEdit from'pages/admin/usage/EgovAdminUsageEdit';import EgovAdminNoticeList from'pages/admin/notice/EgovAdminNoticeList';import EgovAdminNoticeDetail from'pages/admin/notice/EgovAdminNoticeDetail';import EgovAdminNoticeEdit from'pages/admin/notice/EgovAdminNoticeEdit';import EgovAdminGalleryList from'pages/admin/gallery/EgovAdminGalleryList';import EgovAdminGalleryDetail from'pages/admin/gallery/EgovAdminGalleryDetail';import EgovAdminGalleryEdit from'pages/admin/gallery/EgovAdminGalleryEdit';//사이트관리자 암호 바꾸기 기능 추가 2023.04.15(토) 김일국 추가\nimport EgovAdminPasswordUpdate from'pages/admin/manager/EgovAdminPasswordUpdate';import*as EgovNet from'api/egovFetch';// jwt토큰 위조 검사 때문에 추가\nimport initPage from'js/ui';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const RootRoutes=()=>{//useLocation객체를 이용하여 정규표현식을 사용한 /admin/~ 으로 시작하는 경로와 비교에 사용(아래 1줄) */}\nconst location=useLocation();//리액트에서 사이트관리자에 접근하는 토큰값 위변조 방지용으로 서버에서 비교하는 함수 추가\nconst jwtAuthentication=useCallback(()=>{console.group(\"jwtAuthentication\");console.log(\"[Start] jwtAuthentication ------------------------------\");const jwtAuthURL=\"/jwtAuthAPI\";let requestOptions={method:\"POST\"};EgovNet.requestFetch(jwtAuthURL,requestOptions,resp=>{if(resp===false){setMounted(false);}else{setMounted(true);// 이 값으로 true 일 때만 페이지를 렌더링이 되는 변수 사용.\n}});console.log(\"------------------------------jwtAuthentication [End]\");console.groupEnd(\"jwtAuthentication\");},[]);//시스템관리 메뉴인 /admin/으로 시작하는 URL은 모두 로그인이 필요하도록 코드추가(아래)\nconst isMounted=useRef(false);// 아래 로그인 이동 부분이 2번 실행되지 않도록 즉, 마운트 될 때만 실행되도록 변수 생성\nconst[mounted,setMounted]=useState(false);// 컴포넌트 최초 마운트 후 리렌더링 전 로그인 페이지로 이동하는 조건으로 사용\nuseEffect(()=>{if(!isMounted.current){// 컴포넌트 최초 마운트 시 페이지 진입 전(렌더링 전) 실행\nisMounted.current=true;// 이 값으로 true 일 때만 페이지를 렌더링이 되는 변수 사용.\nsetMounted(true);// 이 값으로 true 일 때만 페이지를 렌더링이 되는 변수 사용.\nconst regex=/^(\\/admin\\/)+(.)*$/;//정규표현식 사용: /admin/~ 으로 시작하는 경로 모두 포함\nif(regex.test(location.pathname)){setMounted(false);// 이 값으로 true 일 때만 페이지를 렌더링이 되는 변수 사용. 기본은 숨기기\njwtAuthentication();// 이 함수에서 관리자단 인증여부 확인 후 렌더링 처리\n}}},[jwtAuthentication,location,mounted]);// location 경로와 페이지 마운트상태가 변경 될 때 업데이트 후 리렌더링\nif(mounted){// 인증 없이 시스템관리 URL로 접근할 때 렌더링 되는 것을 방지하는 조건추가. \nreturn/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:URL.ERROR,element:/*#__PURE__*/_jsx(EgovError,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(SecondRoutes,{})})]});}};const SecondRoutes=()=>{// eslint-disable-next-line no-unused-vars\nconst[loginVO,setLoginVO]=useState({});//useRef객체를 사용하여 페이지 마운트 된 후 ui.js를 로딩 하도록 변경 코드 추가(아래)\nconst isMounted=useRef(false);// 아래 로그인 이동 부분이 2번 실행되지 않도록 즉, 마운트 될 때만 실행되도록 변수 생성\nuseEffect(()=>{if(!isMounted.current){// 컴포넌트 최초 마운트 시 페이지 진입 전(렌더링 전) 실행\nisMounted.current=true;// 이 값으로 true 일 때만 페이지를 렌더링이 되는 변수 사용.\n}else{initPage();}},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EgovHeader,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:URL.MAIN,element:/*#__PURE__*/_jsx(EgovMain,{})}),/*#__PURE__*/_jsx(Route,{path:URL.LOGIN,element:/*#__PURE__*/_jsx(EgovLogin,{onChangeLogin:user=>setLoginVO(user)})}),/*#__PURE__*/_jsx(Route,{path:URL.ERROR,element:/*#__PURE__*/_jsx(EgovError,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ABOUT,element:/*#__PURE__*/_jsx(Navigate,{to:URL.ABOUT_SITE})}),/*#__PURE__*/_jsx(Route,{path:URL.ABOUT_SITE,element:/*#__PURE__*/_jsx(EgovAboutSite,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ABOUT_HISTORY,element:/*#__PURE__*/_jsx(EgovAboutHistory,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ABOUT_ORGANIZATION,element:/*#__PURE__*/_jsx(EgovAboutOrganization,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ABOUT_LOCATION,element:/*#__PURE__*/_jsx(EgovAboutLocation,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INTRO,element:/*#__PURE__*/_jsx(Navigate,{to:URL.INTRO_WORKS})}),/*#__PURE__*/_jsx(Route,{path:URL.INTRO_WORKS,element:/*#__PURE__*/_jsx(EgovIntroWork,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INTRO_SERVICE,element:/*#__PURE__*/_jsx(EgovIntroService,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT,element:/*#__PURE__*/_jsx(Navigate,{to:URL.SUPPORT_DOWNLOAD})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_DOWNLOAD,element:/*#__PURE__*/_jsx(EgovSupportDownloadList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_DOWNLOAD_DETAIL,element:/*#__PURE__*/_jsx(EgovSupportDownloadDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_DOWNLOAD_CREATE,element:/*#__PURE__*/_jsx(EgovSupportDownloadCreate,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_QNA,element:/*#__PURE__*/_jsx(EgovSupportQnaList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_QNA_DETAIL,element:/*#__PURE__*/_jsx(EgovSupportQnaDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.SUPPORT_APPLY,element:/*#__PURE__*/_jsx(EgovSupportApply,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM,element:/*#__PURE__*/_jsx(Navigate,{to:URL.INFORM_DAILY})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_DAILY,element:/*#__PURE__*/_jsx(EgovDailyList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_DAILY_DETAIL,element:/*#__PURE__*/_jsx(EgovDailyDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_WEEKLY,element:/*#__PURE__*/_jsx(EgovWeeklyList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_WEEKLY_DETAIL,element:/*#__PURE__*/_jsx(EgovDailyDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_NOTICE,element:/*#__PURE__*/_jsx(EgovNoticeList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_NOTICE_DETAIL,element:/*#__PURE__*/_jsx(EgovNoticeDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_NOTICE_CREATE,element:/*#__PURE__*/_jsx(EgovNoticeEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_NOTICE_MODIFY,element:/*#__PURE__*/_jsx(EgovNoticeEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_NOTICE_REPLY,element:/*#__PURE__*/_jsx(EgovNoticeEdit,{mode:CODE.MODE_REPLY})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_GALLERY,element:/*#__PURE__*/_jsx(EgovGalleryList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_GALLERY_DETAIL,element:/*#__PURE__*/_jsx(EgovGalleryDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_GALLERY_CREATE,element:/*#__PURE__*/_jsx(EgovGalleryEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_GALLERY_MODIFY,element:/*#__PURE__*/_jsx(EgovGalleryEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.INFORM_GALLERY_REPLY,element:/*#__PURE__*/_jsx(EgovGalleryEdit,{mode:CODE.MODE_REPLY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN,element:/*#__PURE__*/_jsx(Navigate,{to:URL.ADMIN_SCHEDULE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_SCHEDULE,element:/*#__PURE__*/_jsx(EgovAdminScheduleList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_SCHEDULE_DETAIL,element:/*#__PURE__*/_jsx(EgovAdminScheduleDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_SCHEDULE_CREATE,element:/*#__PURE__*/_jsx(EgovAdminScheduleEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_SCHEDULE_MODIFY,element:/*#__PURE__*/_jsx(EgovAdminScheduleEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_BOARD,element:/*#__PURE__*/_jsx(EgovAdminBoardList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_BOARD_CREATE,element:/*#__PURE__*/_jsx(EgovAdminBoardEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_BOARD_MODIFY,element:/*#__PURE__*/_jsx(EgovAdminBoardEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_USAGE,element:/*#__PURE__*/_jsx(EgovAdminUsageList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_USAGE_CREATE,element:/*#__PURE__*/_jsx(EgovAdminUsageEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_USAGE_MODIFY,element:/*#__PURE__*/_jsx(EgovAdminUsageEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_NOTICE,element:/*#__PURE__*/_jsx(EgovAdminNoticeList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_NOTICE_DETAIL,element:/*#__PURE__*/_jsx(EgovAdminNoticeDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_NOTICE_CREATE,element:/*#__PURE__*/_jsx(EgovAdminNoticeEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_NOTICE_MODIFY,element:/*#__PURE__*/_jsx(EgovAdminNoticeEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_NOTICE_REPLY,element:/*#__PURE__*/_jsx(EgovAdminNoticeEdit,{mode:CODE.MODE_REPLY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_GALLERY,element:/*#__PURE__*/_jsx(EgovAdminGalleryList,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_GALLERY_DETAIL,element:/*#__PURE__*/_jsx(EgovAdminGalleryDetail,{})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_GALLERY_CREATE,element:/*#__PURE__*/_jsx(EgovAdminGalleryEdit,{mode:CODE.MODE_CREATE})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_GALLERY_MODIFY,element:/*#__PURE__*/_jsx(EgovAdminGalleryEdit,{mode:CODE.MODE_MODIFY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_GALLERY_REPLY,element:/*#__PURE__*/_jsx(EgovAdminGalleryEdit,{mode:CODE.MODE_REPLY})}),/*#__PURE__*/_jsx(Route,{path:URL.ADMIN_MANAGER,element:/*#__PURE__*/_jsx(EgovAdminPasswordUpdate,{})})]}),/*#__PURE__*/_jsx(EgovFooter,{}),\"]\"]});};export default RootRoutes;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}