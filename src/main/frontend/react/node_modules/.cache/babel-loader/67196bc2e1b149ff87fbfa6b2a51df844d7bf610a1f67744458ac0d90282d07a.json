{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{AuthContext}from'../../AuthContext';import axios from'axios';import'../../css/userInfo.css';// CSS 모듈 임포트\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const UserInfo=()=>{const{sessionUserName}=useContext(AuthContext);const[subscriptions,setSubscriptions]=useState([]);const[subscriptionName,setSubscriptionName]=useState('');const SERVER_URL='http://localhost:8080';useEffect(()=>{// 구독 정보를 불러오는 API 호출\naxios.get(\"\".concat(SERVER_URL,\"/subscriptions\")).then(response=>{setSubscriptions(response.data);}).catch(error=>console.error('구독 정보를 불러오는 데 실패했습니다.',error));},[]);const handleSubscribe=e=>{e.preventDefault();// 구독 추가 API 호출\naxios.post(\"\".concat(SERVER_URL,\"/subscribe\"),{value:subscriptionName}).then(response=>{console.log('구독이 성공적으로 추가되었습니다.',response.data);setSubscriptionName('');const newSubscription=response.data;setSubscriptions([...subscriptions,newSubscription]);}).catch(error=>{console.error('구독 추가에 실패했습니다.',error);});};const handleUnsubscribe=subscriptionId=>{axios.delete(\"\".concat(SERVER_URL,\"/unsubscribe/\").concat(subscriptionId)).then(()=>{// 성공적으로 삭제된 후 구독 목록 업데이트\nsetSubscriptions(subscriptions.filter(subscription=>subscription.id!==subscriptionId));}).catch(error=>console.error('구독 취소 실패',error));};return/*#__PURE__*/_jsxs(\"div\",{className:\"userInfoContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"userInfoTitle\",children:\"\\uC720\\uC800 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"userName\",children:[\"\\uC774\\uB984: \",/*#__PURE__*/_jsx(\"strong\",{children:sessionUserName})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"subscriptionInfoTitle\",children:\"\\uD0A4\\uC6CC\\uB4DC \\uAD6C\\uB3C5\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubscribe,className:\"subscriptionForm\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subscriptionName\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"subscriptionName\",className:\"subscriptionInput\",value:subscriptionName,onChange:e=>setSubscriptionName(e.target.value),required:true,placeholder:\"\\uD0A4\\uC6CC\\uB4DC\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"subscribeButton\",children:\"\\uAD6C\\uB3C5 \\uCD94\\uAC00\"})]}),subscriptions.map(subscription=>/*#__PURE__*/_jsxs(\"div\",{className:\"subscriptionItem\",children:[subscription.value,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleUnsubscribe(subscription.id),className:\"unsubscribeButton\",children:\"X\"})]},subscription.id))]})]});};export default UserInfo;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}