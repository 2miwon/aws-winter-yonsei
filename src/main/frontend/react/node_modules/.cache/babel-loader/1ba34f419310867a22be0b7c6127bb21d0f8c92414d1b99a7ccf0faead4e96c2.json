{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import*as EgovNet from'api/egovFetch';import URL from'constants/url';import CODE from'constants/code';import{default as EgovLeftNav}from'components/leftmenu/EgovLeftNavAdmin';import EgovRadioButtonGroup from'components/EgovRadioButtonGroup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EgovAdminUsageEdit(props){var _location$state,_location$state2;console.group(\"EgovAdminUsageEdit\");console.log(\"[Start] EgovAdminUsageEdit ------------------------------\");console.log(\"EgovAdminUsageEdit [props] : \",props);const navigate=useNavigate();const location=useLocation();console.log(\"EgovAdminUsageEdit [location] : \",location);const bbsId=((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.bbsId)||\"\";const trgetId=((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.trgetId)||\"SYSTEM_DEFAULT_BOARD\";const[modeInfo,setModeInfo]=useState({mode:props.mode});const[boardDetail,setBoardDetail]=useState({});const[notUsedBdMstrList,setNotUsedBdMstrList]=useState([]);// eslint-disable-next-line no-unused-vars\nconst[useAtRadioGroup,setUseAtRadioGroup]=useState([{value:\"Y\",label:\"사용\"},{value:\"N\",label:\"미사용\"}]);const initMode=()=>{switch(props.mode){case CODE.MODE_CREATE:setModeInfo({...modeInfo,modeTitle:\"등록\",editURL:'/bbsUseInf'});break;case CODE.MODE_MODIFY:setModeInfo({...modeInfo,modeTitle:\"수정\",editURL:\"/bbsUseInf/\".concat(bbsId)});break;default:navigate({pathname:URL.ERROR},{state:{msg:\"\"}});}retrieveDetail();};const retrieveDetail=()=>{if(modeInfo.mode===CODE.MODE_CREATE){// 등록모드일 경우 사용중이지 않은 MasterBoard만 조회\nsetBoardDetail({useAt:\"Y\",//사용여부 초기값\ntrgetId:\"SYSTEM_DEFAULT_BOARD\"//시스템 targetId default값\n});//새로 생성된 MstrBoard 리스트 조회\nconst retrieveMasterBdURL='/notUsedBbsMaster';const requestOptions={method:\"GET\",headers:{'Content-type':'application/json'}};EgovNet.requestFetch(retrieveMasterBdURL,requestOptions,function(resp){setNotUsedBdMstrList(resp.result.resultList);});return;}const retrieveDetailURL=\"/bbsUseInf/\".concat(trgetId,\"/\").concat(bbsId);const requestOptions={method:\"GET\",headers:{'Content-type':'application/json'}};EgovNet.requestFetch(retrieveDetailURL,requestOptions,function(resp){// 수정모드일 경우 조회값 세팅\nif(modeInfo.mode===CODE.MODE_MODIFY){setBoardDetail(resp.result.bdUseVO);setNotUsedBdMstrList(resp.result.resultList);}});};const updateBoard=()=>{let modeStr=modeInfo.mode===CODE.MODE_CREATE?\"POST\":\"PUT\";let requestOptions={};const formData=new FormData();if(modeStr===\"POST\"){for(let key in boardDetail){formData.append(key,boardDetail[key]);//console.log(\"boardDetail [%s] \", key, boardDetail[key]);\n}requestOptions={method:modeStr,headers:{},body:formData};}else{requestOptions={method:modeStr,headers:{'Content-type':'application/json'},body:JSON.stringify({...boardDetail})};}const usageEdit=()=>{EgovNet.requestFetch(modeInfo.editURL,requestOptions,resp=>{if(Number(resp.resultCode)===Number(CODE.RCV_SUCCESS)){navigate({pathname:URL.ADMIN_USAGE});}else{navigate({pathname:URL.ERROR},{state:{msg:resp.resultMessage}});}});};if(modeInfo.mode===CODE.MODE_MODIFY){usageEdit();}else{if(formValidator(formData)){usageEdit();}}};const formValidator=formData=>{if(formData.get('bbsId')===null||formData.get('bbsId')===\"\"){alert(\"게시판명은 필수 값입니다.\");return false;}if(modeInfo.mode===CODE.MODE_CREATE){if(formData.get('trgetType')===null||formData.get('trgetType')===\"\"){alert(\"커뮤니티/동호회명은 필수 값입니다.\");return false;}}return true;};useEffect(()=>{initMode();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);console.log(\"------------------------------EgovAdminUsageEdit [End]\");console.groupEnd(\"EgovAdminUsageEdit\");return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"c_wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"location\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"home\",href:\"#!\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#!\",children:\"\\uC0AC\\uC774\\uD2B8\\uAD00\\uB9AC\"})}),/*#__PURE__*/_jsx(\"li\",{children:\"\\uAC8C\\uC2DC\\uD310\\uC0AC\\uC6A9\\uAD00\\uB9AC\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",children:[/*#__PURE__*/_jsx(EgovLeftNav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents BOARD_USE_LIST\",id:\"contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top_tit\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"tit_1\",children:\"\\uC0AC\\uC774\\uD2B8\\uAD00\\uB9AC\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"tit_2\",children:\"\\uAC8C\\uC2DC\\uD310\\uC0AC\\uC6A9 \\uAD00\\uB9AC\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"board_view2\",children:[modeInfo.mode===CODE.MODE_CREATE&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsxs(\"dt\",{children:[\"\\uAC8C\\uC2DC\\uD310\\uBA85\",/*#__PURE__*/_jsx(\"span\",{className:\"req\",children:\"\\uD544\\uC218\"})]}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"label\",{className:\"f_select \",htmlFor:\"bbsId\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"bbsId\",name:\"bbsId\",title:\"\\uAC8C\\uC2DC\\uD310\\uC120\\uD0DD\",onChange:e=>{let index=e.nativeEvent.target.selectedIndex;let label=e.nativeEvent.target[index].text;console.log(\"bbsId onChange : \",e.nativeEvent);setBoardDetail({...boardDetail,bbsId:e.target.value,bbsNm:label});},value:boardDetail.bbsId,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),notUsedBdMstrList.map((option,i)=>{console.log(\"notUsedBdMstrList option : \",option);return/*#__PURE__*/_jsx(\"option\",{value:option.bbsId,children:option.bbsNm},option.bbsId);})]})})})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsxs(\"dt\",{children:[\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0/\\uB3D9\\uD638\\uD68C\\uBA85\",/*#__PURE__*/_jsx(\"span\",{className:\"req\",children:\"\\uD544\\uC218\"})]}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(\"label\",{className:\"f_select \",htmlFor:\"trgetType\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"trgetType\",name:\"trgetType\",className:\"select\",title:\"\",onChange:e=>setBoardDetail({...boardDetail,trgetType:e.target.value,trgetId:\"SYSTEM_DEFAULT_BOARD\"}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\uC120\\uD0DD\\uD558\\uC138\\uC694\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SYSTEM\",children:\"\\uC2DC\\uC2A4\\uD15C \\uD65C\\uC6A9\"})]})})})]})]}),modeInfo.mode===CODE.MODE_MODIFY&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uAC8C\\uC2DC\\uD310\\uBA85\"}),/*#__PURE__*/_jsx(\"dd\",{children:boardDetail&&boardDetail.bbsNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0/\\uB3D9\\uD638\\uD68C\\uBA85\"}),/*#__PURE__*/_jsx(\"dd\",{children:boardDetail&&boardDetail.cmmntyNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsxs(\"dt\",{children:[\"\\uC0AC\\uC6A9\\uC5EC\\uBD80\",/*#__PURE__*/_jsx(\"span\",{className:\"req\",children:\"\\uD544\\uC218\"})]}),/*#__PURE__*/_jsx(\"dd\",{children:/*#__PURE__*/_jsx(EgovRadioButtonGroup,{name:\"useAt\",radioGroup:useAtRadioGroup,setValue:boardDetail.useAt,setter:v=>setBoardDetail({...boardDetail,useAt:v})})})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uAC8C\\uC2DC\\uD310 ID\"}),/*#__PURE__*/_jsx(\"dd\",{children:boardDetail.bbsId==='BBSMSTR_BBBBBBBBBBBB'?/*#__PURE__*/_jsx(Link,{to:{pathname:URL.INFORM_GALLERY},state:{bbsId:boardDetail.bbsId},children:\"\".concat(boardDetail.bbsId)}):/*#__PURE__*/_jsx(Link,{to:{pathname:URL.INFORM_NOTICE},state:{bbsId:boardDetail.bbsId},children:\"\".concat(boardDetail.bbsId)})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"board_btn_area\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left_col btn1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"right_col btn1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn_blue_h46 w_100\",onClick:()=>updateBoard(),children:\" \\uC800\\uC7A5\"}),/*#__PURE__*/_jsx(Link,{to:URL.ADMIN_USAGE,className:\"btn btn_blue_h46 w_100\",children:\"\\uBAA9\\uB85D\"})]})]})]})]})]})]})});}export default EgovAdminUsageEdit;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}