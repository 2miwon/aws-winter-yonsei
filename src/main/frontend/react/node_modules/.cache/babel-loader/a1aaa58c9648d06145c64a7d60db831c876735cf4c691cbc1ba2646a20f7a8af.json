{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useParams}from\"react-router-dom\";import WebViewer from\"@pdftron/webviewer\";import axios from\"axios\";import'../../css/detailPage.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const DetailPage=()=>{const{id}=useParams();const idx=parseInt(id);const viewer=useRef(null);const[bill,setBill]=useState({id:idx,name:'',proposer:'',date:''});const[content,setContent]=useState();useEffect(()=>{const fetchBillDetails=async()=>{try{const response=await axios.get(\"https://open.assembly.go.kr/portal/openapi/TVBPMBILL11?TYPE=json&BILL_NO=\".concat(idx));const data=response.data.TVBPMBILL11[1].row[0];setBill({...bill,name:data.BILL_NAME,proposer:data.PROPOSER,date:data.PROPOSE_DT});}catch(error){console.error('법안 정보를 불러오는 데 실패했습니다.',error);}};const fetchPdf=async()=>{try{// const response = await axios.post(`http://localhost:8080/pdfurl/${idx}`);\n// const response = await axios.post(`http://52.78.206.96:5001/file/${idx}`);\n// const url = response.data;\nWebViewer({// path: \"aws-winter-yonsei/node_modules/@pdftron/webviewer/public\",\npath:\"/webviewer/lib\",licenseKey:\"demo:1707201620106:7f4eafe9030000000069fe03ee7211c47e235a224e21040bb60f132600\",// initialDoc: url,\ninitialDoc:\"https://likms.assembly.go.kr/filegate/servlet/FileGate?bookId=B0821721-6CC5-DB50-1EFB-D11944304549&type=1\"},viewer.current).then(instance=>{const{documentViewer,annotationManager,Annotations}=instance.Core;documentViewer.addEventListener(\"documentLoaded\",()=>{const rectangleAnnot=new Annotations.RectangleAnnotation({PageNumber:1,X:100,Y:150,Width:200,Height:50,Author:annotationManager.getCurrentUser()});annotationManager.addAnnotation(rectangleAnnot);annotationManager.redrawAnnotation(rectangleAnnot);});});}catch(error){console.error(\"Failed to fetch PDF URL:\",error);}};fetchBillDetails();fetchPdf();},[idx]);const fetchSummary=async()=>{try{const response=await axios.post(\"http://localhost:8080/gpt/\".concat(idx,\"/summary\"));setContent(response.data);}catch(error){console.error('요약 내용을 불러오는 데 실패했습니다.',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"detail-page-title\",children:bill.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"bill-info-title\",children:\"\\uBC95\\uC548 \\uC815\\uBCF4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-info-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"\\uBC95\\uC548 \\uBC88\\uD638:\"}),\" \",bill.id]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-info-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"\\uBC95\\uC548 \\uC81C\\uBAA9:\"}),\" \",bill.name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-info-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"\\uB300\\uD45C \\uBC1C\\uC758\\uC790:\"}),\" \",bill.proposer]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-info-detail\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"detail-label\",children:\"\\uBC1C\\uC758\\uC77C:\"}),\" \",bill.date]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-summary\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"summary-button\",onClick:fetchSummary,children:\"\\uC694\\uC57D \\uBCF4\\uAE30\"}),content&&/*#__PURE__*/_jsxs(\"div\",{className:\"summary-content\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"summary-title\",children:\"\\uC694\\uC57D \\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"p\",{className:\"summary-text\",children:content})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"webviewer\",ref:viewer,style:{height:\"100vh\"}})})]});};export default DetailPage;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}