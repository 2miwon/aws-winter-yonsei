{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import*as EgovNet from'api/egovFetch';import URL from'constants/url';import CODE from'constants/code';import{default as EgovLeftNav}from'components/leftmenu/EgovLeftNavAdmin';import EgovAttachFile from'components/EgovAttachFile';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EgovAdminScheduleDetail(props){var _scheduleDetail$start,_scheduleDetail$endDa,_location$state2;console.group(\"EgovAdminScheduleDetail\");console.log(\"[Start] EgovAdminScheduleDetail ------------------------------\");console.log(\"EgovAdminScheduleDetail [props] : \",props);const navigate=useNavigate();const location=useLocation();console.log(\"EgovAdminScheduleDetail [location] : \",location);const[scheduleDetail,setScheduleDetail]=useState({});const[boardAttachFiles,setBoardAttachFiles]=useState();const[user,setUser]=useState({});const retrieveDetail=()=>{var _location$state;const retrieveDetailURL=\"/schedule/\".concat((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.schdulId);const requestOptions={method:\"GET\",headers:{'Content-type':'application/json'}};EgovNet.requestFetch(retrieveDetailURL,requestOptions,function(resp){let rawScheduleDetail=resp.result.scheduleDetail;rawScheduleDetail.startDateTime=convertDate(rawScheduleDetail.schdulBgnde);rawScheduleDetail.endDateTime=convertDate(rawScheduleDetail.schdulEndde);rawScheduleDetail.reptitSeCodeNm=getCodeName(resp.result.reptitSeCode,resp.result.scheduleDetail.reptitSeCode);rawScheduleDetail.schdulIpcrCodeNm=getCodeName(resp.result.schdulIpcrCode,resp.result.scheduleDetail.schdulIpcrCode);rawScheduleDetail.schdulSeNm=getCodeName(resp.result.schdulSe,resp.result.scheduleDetail.schdulSe);setScheduleDetail(rawScheduleDetail);setUser(resp.result.user);setBoardAttachFiles(resp.result.resultFiles);});};const convertDate=str=>{let year=str.substring(0,4);let month=str.substring(4,6);let date=str.substring(6,8);let hour=str.substring(8,10);let minute=str.substring(10,12);return{year:year,month:month,date:date,hour:hour,minute:minute,dateForm:year+\"년 \"+month+\"월 \"+date+\"일 \"+hour+\"시 \"+minute+\"분 \"};};const getCodeName=(codeArr,code)=>{return codeArr.map(codeObj=>{if(codeObj.code===code.trim())return codeObj.codeNm;else return\"\";});};const onClickDeleteSchedule=schdulId=>{const deleteBoardURL=\"/schedule/\".concat(schdulId);const requestOptions={method:\"DELETE\",headers:{'Content-type':'application/json'}};EgovNet.requestFetch(deleteBoardURL,requestOptions,resp=>{console.log(\"====>>> Schdule delete= \",resp);if(Number(resp.resultCode)===Number(CODE.RCV_SUCCESS)){alert(\"게시글이 삭제되었습니다.\");navigate(URL.ADMIN_SCHEDULE,{replace:true});}else{// alert(\"ERR : \" + resp.message);\nnavigate({pathname:URL.ERROR},{state:{msg:resp.resultMessage}});}});};useEffect(function(){retrieveDetail();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);console.log(\"------------------------------EgovAdminScheduleDetail [End]\");console.groupEnd(\"EgovAdminScheduleDetail\");return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"c_wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"location\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:URL.MAIN,className:\"home\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:URL.ADMIN,children:\"\\uC0AC\\uC774\\uD2B8\\uAD00\\uB9AC\"})}),/*#__PURE__*/_jsx(\"li\",{children:\"\\uC77C\\uC815\\uAD00\\uB9AC\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"layout\",children:[/*#__PURE__*/_jsx(EgovLeftNav,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"contents SITE_GALLARY_VIEW\",id:\"contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"top_tit\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"tit_1\",children:\"\\uC0AC\\uC774\\uD2B8\\uAD00\\uB9AC\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"tit_2\",children:\"\\uC77C\\uC815\\uAD00\\uB9AC \\uC0C1\\uC138\\uBCF4\\uAE30\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"board_view2\",children:[/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uC77C\\uC815\\uAD6C\\uBD84\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulSeNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uC911\\uC694\\uB3C4\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulIpcrCodeNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uBD80\\uC11C\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulDeptName})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uC77C\\uC815\\uBA85\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uC77C\\uC815\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulCn})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uBC18\\uBCF5\\uAD6C\\uBD84\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.reptitSeCodeNm})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uB0A0\\uC9DC/\\uC2DC\\uAC04\"}),/*#__PURE__*/_jsxs(\"dd\",{children:[\" \",(_scheduleDetail$start=scheduleDetail.startDateTime)===null||_scheduleDetail$start===void 0?void 0:_scheduleDetail$start.dateForm,\" ~ \",(_scheduleDetail$endDa=scheduleDetail.endDateTime)===null||_scheduleDetail$endDa===void 0?void 0:_scheduleDetail$endDa.dateForm]})]}),/*#__PURE__*/_jsxs(\"dl\",{children:[/*#__PURE__*/_jsx(\"dt\",{children:\"\\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"dd\",{children:scheduleDetail.schdulChargerName})]}),/*#__PURE__*/_jsx(EgovAttachFile,{boardFiles:boardAttachFiles}),/*#__PURE__*/_jsxs(\"div\",{className:\"board_btn_area\",children:[user.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"left_col btn1\",children:[/*#__PURE__*/_jsx(Link,{to:{pathname:URL.ADMIN_SCHEDULE_MODIFY},state:{schdulId:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.schdulId},className:\"btn btn_skyblue_h46 w_100\",children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn_skyblue_h46 w_100\",onClick:e=>{var _location$state3;onClickDeleteSchedule((_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.schdulId);},children:\"\\uC0AD\\uC81C\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right_col btn1\",children:/*#__PURE__*/_jsx(Link,{to:URL.ADMIN_SCHEDULE,className:\"btn btn_blue_h46 w_100\",children:\"\\uBAA9\\uB85D\"})})]})]})]})]})]})});}export default EgovAdminScheduleDetail;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}