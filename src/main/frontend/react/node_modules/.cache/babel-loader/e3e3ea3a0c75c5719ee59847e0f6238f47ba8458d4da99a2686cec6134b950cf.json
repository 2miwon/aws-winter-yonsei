{"ast":null,"code":"// SearchResult.jsx\nimport React,{useState,useEffect}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{fetchSearchResults}from'api/search';import'../../css/searchResult.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchResult(){const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[count,setCount]=useState(0);const[sort,setSort]=useState('RANK');const[pageSize]=useState(10);const location=useLocation();const navigate=useNavigate();const queryParams=new URLSearchParams(location.search);const query=queryParams.get('query');const page=queryParams.get('page');const handleInputChange=e=>{setSearchQuery(e.target.value);};const handleSearch=async e=>{if(e.type==='click'||e.key==='Enter'){navigate(\"/searchResult?query=\".concat(searchQuery,\"&page=0\"));// try {\n//   const data = await fetchSearchResults(searchQuery, page, sort);\n//   setSearchResults(data.result);\n//   setCount(data.total);\n//   setPage(0);\n// } catch (error) {\n//   console.error('Error fetching search results:', error);\n// }\n}};useEffect(()=>{if(query){const fetchResults=async()=>{try{const data=await fetchSearchResults(query,page,sort);setSearchResults(data.result);setCount(data.total);}catch(error){console.error('Error fetching search results:',error);}};fetchResults();}},[query,page,sort]);const totalPages=Math.ceil(count/pageSize);const MAX_PAGE_NUM_DISPLAY=10;// 한 번에 보여줄 최대 페이지 번호 개수\nconst startPage=Math.floor(page/MAX_PAGE_NUM_DISPLAY)*MAX_PAGE_NUM_DISPLAY;const handlePageChange=newPage=>{navigate(\"?query=\".concat(query,\"&page=\").concat(newPage));// URL을 업데이트하여 현재 페이지 상태를 반영\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[searchResults.map(result=>{var _result$status;return/*#__PURE__*/_jsxs(Link,{to:\"/DetailPage/\".concat(result.bill_no),className:\"bn\".concat((_result$status=result.status)!==null&&_result$status!==void 0?_result$status:3),children:[/*#__PURE__*/_jsx(\"strong\",{children:result.title}),/*#__PURE__*/_jsxs(\"span\",{children:[result.date,/*#__PURE__*/_jsx(\"br\",{}),result.speaker,/*#__PURE__*/_jsx(\"br\",{}),result.contents,\"=\"]})]});}),searchResults.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{alignContent:'center'},children:\"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[startPage>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(startPage-1),children:\"\\uC774\\uC804\"}),Array.from({length:Math.min(MAX_PAGE_NUM_DISPLAY,totalPages-startPage)},(_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(i+startPage),disabled:i+startPage===page,children:i+startPage+1},i+startPage)),startPage+MAX_PAGE_NUM_DISPLAY<totalPages&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(startPage+MAX_PAGE_NUM_DISPLAY),children:\"\\uB2E4\\uC74C\"})]})]});}export default SearchResult;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useNavigate","fetchSearchResults","jsx","_jsx","jsxs","_jsxs","SearchResult","searchQuery","setSearchQuery","searchResults","setSearchResults","count","setCount","sort","setSort","pageSize","location","navigate","queryParams","URLSearchParams","search","query","get","page","handleInputChange","e","target","value","handleSearch","type","key","concat","fetchResults","data","result","total","error","console","totalPages","Math","ceil","MAX_PAGE_NUM_DISPLAY","startPage","floor","handlePageChange","newPage","className","children","map","_result$status","to","bill_no","status","title","date","speaker","contents","length","style","alignContent","onClick","Array","from","min","_","i","disabled"],"sources":["/Users/macheewon/Documents/GitHub/aws-winter-yonsei/src/main/frontend/react/src/pages/search/SearchResult.jsx"],"sourcesContent":["// SearchResult.jsx\nimport React, { useState, useEffect } from 'react';\nimport {Link, useLocation, useNavigate} from 'react-router-dom';\nimport { fetchSearchResults } from 'api/search';\nimport '../../css/searchResult.css';\n\nfunction SearchResult() {\n    const [searchQuery, setSearchQuery] = useState('');\n\n    const [searchResults, setSearchResults] = useState([]);\n    const [count, setCount] = useState(0);\n    const [sort, setSort] = useState('RANK');\n    const [pageSize] = useState(10);\n\n    const location = useLocation();\n    const navigate = useNavigate();\n\n    const queryParams = new URLSearchParams(location.search);\n    const query = queryParams.get('query');\n    const page = queryParams.get('page');\n\n    const handleInputChange = (e) => {\n        setSearchQuery(e.target.value);\n    };\n\n    const handleSearch = async (e) => {\n        if (e.type === 'click' || e.key === 'Enter') {\n            navigate(`/searchResult?query=${searchQuery}&page=0`);\n            // try {\n            //   const data = await fetchSearchResults(searchQuery, page, sort);\n            //   setSearchResults(data.result);\n            //   setCount(data.total);\n            //   setPage(0);\n            // } catch (error) {\n            //   console.error('Error fetching search results:', error);\n            // }\n        }\n    }\n\n\n    useEffect(() => {\n        if (query) {\n            const fetchResults = async () => {\n                try {\n                    const data = await fetchSearchResults(query, page, sort);\n                    setSearchResults(data.result);\n                    setCount(data.total);\n                } catch (error) {\n                    console.error('Error fetching search results:', error);\n                }\n            };\n\n            fetchResults();\n        }\n    }, [query, page, sort]);\n\n    const totalPages = Math.ceil(count / pageSize);\n    const MAX_PAGE_NUM_DISPLAY = 10; // 한 번에 보여줄 최대 페이지 번호 개수\n    const startPage = Math.floor(page / MAX_PAGE_NUM_DISPLAY) * MAX_PAGE_NUM_DISPLAY;\n\n    const handlePageChange = (newPage) => {\n        navigate(`?query=${query}&page=${newPage}`); // URL을 업데이트하여 현재 페이지 상태를 반영\n    };\n\n    return (\n        <div className=\"search-results\">\n            {searchResults.map((result) => (\n                <Link to={`/DetailPage/${result.bill_no}`} className={`bn${result.status ?? 3}`}>\n                    <strong>{result.title}</strong>\n                    <span>{result.date}\n                    <br/>{result.speaker}\n                    <br/>{result.contents}=</span>\n                </Link>\n            ))}\n            {searchResults.length === 0 && (\n                <p style={{alignContent: 'center'}}>검색 결과가 없습니다.</p>\n            )}\n            <div className=\"pagination\">\n                {startPage > 0 && (\n                    <button onClick={() => handlePageChange(startPage - 1)}>이전</button>\n                )}\n                {Array.from({length: Math.min(MAX_PAGE_NUM_DISPLAY, totalPages - startPage)}, (_, i) => (\n                    <button\n                        key={i + startPage}\n                        onClick={() => handlePageChange(i + startPage)}\n                        disabled={i + startPage === page}\n                    >\n                        {i + startPage + 1}\n                    </button>\n                ))}\n                {startPage + MAX_PAGE_NUM_DISPLAY < totalPages && (\n                    <button onClick={() => handlePageChange(startPage + MAX_PAGE_NUM_DISPLAY)}>다음</button>\n                )}\n            </div>\n\n        </div>\n    );\n}\n\nexport default SearchResult;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}